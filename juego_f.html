<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Preguntas sobre Animales en Extinción</title>
    <link rel="stylesheet" href="juego_f.css">
    <link rel="shortcut icon" href="img/logo.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <main id="main-content" class="main-inicio">
        <div class="container">
            <div id="intro-container">
                <h1>Juego de Preguntas sobre Animales en Extinción</h1><br>
                <p><u>Descripción del juego:</u> Este juego trata sobre animales en peligro de extinción. Responde las preguntas correctamente para ganar puntos.</p>
                <p><u>Reglas:</u> Lee cada pregunta y selecciona la respuesta correcta. Cada respuesta correcta te otorga un punto.</p>
                <p><u>Autor:</u> Facundo Marianelli Keichian</p>
                <button id="start-button" class="btn">Iniciar</button>
            </div>
            <div id="quiz-container" class="hidden">
                <div id="question-container"></div>
                <div id="answer-buttons" class="btn-container"></div>
                <button id="next-button" class="btn hidden">Siguiente</button>
            </div>
            <div id="result-container" class="hidden">
                <h2 id="result"></h2>
                <button id="restart-button" class="btn">Reiniciar</button>
            </div>
        </div>
    </main>

    <footer id="mi-footer" class="text-center text-muted">
        <div >
            <p class="footerLetra">Derechos reservados - Sitio desarrollado para uso educativo - Diseño y desarrollo Web - UADE - 2024</p>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script src="script.js"></script>
</body>

</html>

<script>
    const questions = [
        {
            question: "¿Cuál de estos animales está en peligro crítico de extinción?",
            image: "assets/preg1.jpeg",
            answers: [
                { text: "Panda gigante", correct: false },
                { text: "Rinoceronte de Java", correct: true },
                { text: "Tigre de Bengala", correct: false },
                { text: "Elefante africano", correct: false }
            ]
        },
        {
            question: "¿Cuál es una de las principales amenazas para los osos polares?",
            image: "assets/preg2.jpeg",
            answers: [
                { text: "Cambio climático", correct: true },
                { text: "Caza furtiva", correct: false },
                { text: "Deforestación", correct: false },
                { text: "Contaminación", correct: false }
            ]
        },
        {
            question: "¿Qué animal marino está en peligro debido a la contaminación plástica?",
            image: "assets/preg3.jpeg",
            answers: [
                { text: "Tortuga marina", correct: true },
                { text: "Delfín", correct: false },
                { text: "Tiburón", correct: false },
                { text: "Pulpo", correct: false }
            ]
        }
    ];

    let currentQuestionIndex = 0;
    let score = 0;

    const introContainer = document.getElementById('intro-container');
    const quizContainer = document.getElementById('quiz-container');
    const questionContainer = document.getElementById('question-container');
    const answerButtons = document.getElementById('answer-buttons');
    const nextButton = document.getElementById('next-button');
    const resultContainer = document.getElementById('result-container');
    const resultText = document.getElementById('result');
    const restartButton = document.getElementById('restart-button');
    const startButton = document.getElementById('start-button');

    restartButton.addEventListener('click', () => {
        resultContainer.classList.add('hidden');
        introContainer.classList.remove('hidden');
    });

    startButton.addEventListener('click', startGame);

    function startGame() {
        introContainer.classList.add('hidden');
        quizContainer.classList.remove('hidden');
        currentQuestionIndex = 0;
        score = 0;
        nextButton.classList.add('hidden');
        resultContainer.classList.add('hidden');
        document.querySelector("footer").style.display = "none";
        showQuestion();
    }

    function showQuestion() {
        resetState();
        const currentQuestion = questions[currentQuestionIndex];
        questionContainer.innerHTML = `<img src="${currentQuestion.image}" alt="Imagen de ${currentQuestion.question}"><p>${currentQuestion.question}</p>`;
        currentQuestion.answers.forEach(answer => {
            const button = document.createElement('button');
            button.textContent = answer.text;
            button.classList.add('btn');
            button.addEventListener('click', () => selectAnswer(button, answer));
            answerButtons.appendChild(button);
        });
    }

    function resetState() {
        nextButton.classList.add('hidden');
        while (answerButtons.firstChild) {
            answerButtons.removeChild(answerButtons.firstChild);
        }
    }

    function selectAnswer(button, answer) {
        const correct = answer.correct;
        if (correct) {
            score++;
        }
        Array.from(answerButtons.children).forEach(btn => {
            btn.disabled = true;
            if (btn === button) {
                btn.style.backgroundColor = correct ? 'green' : 'red';
            }
        });
        nextButton.classList.remove('hidden');
    }

    nextButton.addEventListener('click', () => {
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
            showQuestion();
        } else {
            showResult();
        }
    });

    function showResult() {
        quizContainer.classList.add('hidden');
        resultContainer.classList.remove('hidden');
        resultText.textContent = `Tu puntuación fue ${score} de ${questions.length}`;
        document.querySelector("footer").style.display = "block";
    }
</script>
